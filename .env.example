# Perplexity OSS Configuration

# ============================================================================
# Lyzr AI Configuration
# ============================================================================

# Required: Your Lyzr API key (get from https://studio.lyzr.ai)
LYZR_API_KEY=your_lyzr_api_key_here

# Optional: Lyzr API endpoint (default: https://agent-prod.studio.lyzr.ai)
LYZR_API_BASE=https://agent-prod.studio.lyzr.ai

# ============================================================================
# Agent IDs - OPTIONAL (will auto-create if not provided)
# ============================================================================
#
# The application can automatically create all required Lyzr agents on first run.
# You have 3 options:
#
# OPTION 1 (Recommended): Leave these blank - agents will be auto-created
#   - On first startup, agents will be created via Lyzr API
#   - Agent IDs will be saved to config/agents.json (persists via Docker volume)
#   - Subsequent runs will use the saved IDs
#
# OPTION 2: Provide your own agent IDs from Lyzr Studio
#   - Clone the Perplexity OSS blueprint in Lyzr Studio
#   - Copy each agent ID and paste below
#
# OPTION 3: Mix - provide some IDs, auto-create others
#   - Only IDs starting with "your_" will be auto-created
#
# ============================================================================

# Required agents (auto-created if commented out or set to "your_*")
# LYZR_QUERY_REPHRASE_AGENT_ID=your_query_rephrase_agent_id
# LYZR_ANSWER_GENERATION_AGENT_ID=your_answer_generation_agent_id
# LYZR_RELATED_QUESTIONS_AGENT_ID=your_related_questions_agent_id

# Pro mode agents (required only if NEXT_PUBLIC_PRO_MODE_ENABLED=true)
# LYZR_QUERY_PLANNING_AGENT_ID=your_query_planning_agent_id
# LYZR_SEARCH_QUERY_AGENT_ID=your_search_query_agent_id

# ============================================================================
# API Compatibility Layer (OpenAI-compatible endpoints)
# ============================================================================
#
# API Keys for Bearer token authentication on /v1/chat/completions endpoint
# Supports comma-separated list for multiple API keys
#
# Examples:
#   Single key:    API_KEYS=sk-your-secret-key-here
#   Multiple keys: API_KEYS=sk-key-1,sk-key-2,sk-key-3
#
# Usage:
#   curl https://your-domain/v1/chat/completions \
#     -H "Authorization: Bearer sk-your-secret-key-here" \
#     -H "Content-Type: application/json" \
#     -d '{"model":"default","messages":[{"role":"user","content":"Hello"}]}'
#
# Note: Leave blank or comment out to disable the compatibility API endpoints
API_KEYS=apikey_for_backend_access

# ============================================================================
# Search Configuration
# ============================================================================

# Search Configuration (SearXNG - no configuration needed)
SEARCH_PROVIDER=searxng
SEARXNG_BASE_URL=http://searxng:8080

# Frontend Configuration
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_PRO_MODE_ENABLED=true

# Provider
AGENT_PROVIDER="Aws-Bedrock"  # Default
AGENT_LLM_CREDENTIAL="lyzr_aws-bedrock"

# Models
AGENT_MODEL_ANSWER="bedrock/amazon.nova-pro-v1:0"  # Answer generation
AGENT_MODEL_PLANNING="bedrock/amazon.nova-lite-v1:0"  # Planning/queries

# Parameters
AGENT_TEMPERATURE="0.7"
AGENT_TOP_P="0.9"

# Define version
AGENT_VERSION="1.0.0"  # Change for update agents on restart

# On startup:
# - Checks stored version vs current
# - If different, calls PUT /v3/agents/{id} for each agent
# - Updates all agents automatically
# - Saves new version